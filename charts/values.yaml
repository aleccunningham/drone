namespace: drone

server:
  image: "drone"
  imageTag: "0.8"
  imageRegistry: "drone"
  admin: appleboy
  debug: true

db:
  driver: sqlite3
  source: drone.sqlite
  conf:
    name: drone-server-sqlite-db
    mountPath: /var/lib/drone

agent:
  image: "drone-agent"
  imageTag: "0.8"
  imageRegistry: "drone"
  replicas: 1
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 64Mi
  procs:
    max: 1
  keepalive:
    time: "1s"
    timeout: "5s"
  healthcheck: true
  debug:
    enabled: true
    pretty: true

dind:
  mountPath: /var/run/docker.sock

gitea:
  enabled: true
  url: "https://try.gitea.io"
  skip:
    verify: true

## Persist data to a persistent volume
persistence:
  enabled: true
  ## database data Persistent Volume Storage Class
  ## If defined, storageClassName: <storageClass>
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined (the default) or set to null, no storageClassName spec is
  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
  ##   GKE, AWS & OpenStack)
  ##
  # storageClass: "-"
  accessMode: ReadWriteOnce
  size: 8Gi

# Custom mysql configuration files used to override default mysql settings
configurationFiles:
#  mysql.cnf: |-
#    [mysqld]
#    skip-name-resolve

livenessProbe:
  httpGet:
    path: /healthz
    port: 3000
  initialDelaySeconds: 3
  periodSeconds: 3

## Configure the service
service:
  type: LoadBalancer
  httpPort: 8000
  grpcPort: 9000
